import{m as L,q as T,s as A,x as M,t as D,y as F,d as h,o as l,a as m,e as r,g as y,B as C,b as s,z as q,i as b,_ as P,r as f,w as g,v as x,f as i,A as z,C as Q,D as $,E as I,F as V,p as R,j as N,G as O,H as j}from"./index.3b0b5af8.js";function G(e){const t=document.getElementById(e);t&&t.showModal()}function H(e){const t=document.getElementById(e);t&&t.close()}function W(e=!0){const{data:t,isLoading:n,isFetching:o,isSuccess:d,refetch:c}=L(["products"],M,{refetchOnWindowFocus:!1,retry:1,onError:a=>console.error(a),enabled:e});return{data:t,isLoading:n,isFetching:o,isSuccess:d,fetchProducts:c}}function J(){const e=T(),{mutate:t,isLoading:n}=A(o=>F(o.id,o.productData,o.config),{onSuccess:()=>{e.invalidateQueries(["products"]),D.success("Product updated successfully")}});return{update:t,isUpdating:n}}const K=["id"],X={class:"modal-content"},Y=h({__name:"ModalComponent",props:{id:null},setup(e){const t=e;function n(){const o=document.getElementById(t.id);o==null||o.close()}return(o,d)=>{const c=b("vue-feather");return l(),m("dialog",{class:"modal-container",id:t.id},[r(C,{onClick:n,theme:"secondary",class:"close-icon"},{default:y(()=>[r(c,{type:"x",size:"20px"})]),_:1}),s("div",X,[q(o.$slots,"default",{},void 0,!0)])],8,K)}}});const Z=P(Y,[["__scopeId","data-v-68d2800a"]]),tt={class:"form-container edit-product"},et=s("h2",null,"Edit Product",-1),ot={class:"form edit-product-form"},st=h({__name:"EditProductForm",props:{product:null},setup(e){const t=e,n=f(t.product.name),o=f(t.product.price),d=f(t.product.videoURL),{update:c,isUpdating:a}=J();function v(){const u=new FormData;u.append("name",n.value),u.append("price",o.value.toString()),u.append("videoURL",d.value),c({id:t.product.id,productData:u}),H(`edit-product-${t.product.id}`)}return(u,p)=>(l(),m("div",tt,[et,s("form",ot,[g(s("input",{type:"text","onUpdate:modelValue":p[0]||(p[0]=_=>n.value=_)},null,512),[[x,n.value]]),g(s("input",{type:"text","onUpdate:modelValue":p[1]||(p[1]=_=>o.value=_)},null,512),[[x,o.value]]),g(s("input",{type:"text","onUpdate:modelValue":p[2]||(p[2]=_=>d.value=_)},null,512),[[x,d.value]]),r(C,{text:i(a)?"Updating...":"Update",disabled:i(a),onClick:v},null,8,["text","disabled"])])]))}}),nt=e=>(R("data-v-2b3f33db"),e=e(),N(),e),dt={class:"product"},ct={class:"product-img"},at=["src","alt"],rt={class:"product-info"},ut={class:"select-container"},lt={class:"btn-body add-cart-btn"},it={class:"btn-body edit-btn"},pt=nt(()=>s("span",null,"Edit",-1)),_t=h({__name:"ProductItem",props:{product:null},setup(e){const t=e,n="https://apple-shop-backend.herokuapp.com",o=z(),d=`edit-product-${t.product.id}`,c=f(1),a=Array.from(Array(10).keys()).map(k=>k+1),{add:v,isAddingToCart:u}=Q(_);function p(){window.scrollTo({top:0,behavior:"smooth"})}function _(){c.value=1,p()}function S(){v({productId:t.product.id,quantity:c.value})}return(k,U)=>{const B=b("v-select"),w=b("vue-feather");return l(),m("div",dt,[r(Z,{id:d},{default:y(()=>[r(st,{product:e.product},null,8,["product"])]),_:1}),s("div",ct,[s("img",{src:`${i(n)}/${t.product.productImage}`,alt:t.product.name},null,8,at)]),s("div",rt,[s("h3",null,$(t.product.name),1),s("p",null,$(`$${t.product.price}.00`),1),s("div",ut,[r(B,{modelValue:c.value,"onUpdate:modelValue":U[0]||(U[0]=E=>c.value=E),options:i(a),placeholder:"Qnty",clearable:!1},null,8,["modelValue","options"])]),r(C,{theme:"primary",onClick:S},{default:y(()=>[s("div",lt,[s("span",null,$(i(u)?"Adding...":"Add to Cart"),1),r(w,{type:i(u)?"loader":"shopping-cart",size:"20px"},null,8,["type"])])]),_:1}),i(o).user.role==="administrator"?(l(),I(C,{key:0,style:{"margin-top":"1rem"},theme:"primary",onClick:()=>i(G)(d)},{default:y(()=>[s("div",it,[pt,r(w,{type:"edit",size:"20px"})])]),_:1},8,["onClick"])):V("",!0)])])}}});const mt=P(_t,[["__scopeId","data-v-2b3f33db"]]),vt={key:0,class:"products"},ft=h({__name:"ProductsContainer",props:{products:null},setup(e){const t=e;return(n,o)=>e.products?(l(),m("div",vt,[(l(!0),m(O,null,j(t.products,d=>(l(),I(mt,{key:d.id,product:d},null,8,["product"]))),128))])):V("",!0)}});const ht=P(ft,[["__scopeId","data-v-47f213e4"]]),yt={class:"home-container"},gt={class:"search"},xt={key:0},Ct=h({__name:"ProductsView",setup(e){const t=f(""),{data:n,isLoading:o}=W();function d(){var c;return(c=n.value)==null?void 0:c.filter(a=>a.name.toLowerCase().includes(t.value.toLowerCase()))}return(c,a)=>{const v=b("vue-feather");return l(),m("div",yt,[s("div",gt,[g(s("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=u=>t.value=u),placeholder:"Search"},null,512),[[x,t.value]]),r(v,{type:"search",size:"20px"})]),i(o)?(l(),m("h3",xt,[r(v,{type:"loader"})])):(l(),I(ht,{key:1,products:d()},null,8,["products"]))])}}});const Pt=P(Ct,[["__scopeId","data-v-0d3f9b88"]]);export{Pt as default};
