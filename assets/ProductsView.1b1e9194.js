import{q as L,s as T,x as A,y as M,t as D,z as F,d as h,o as l,a as m,e as r,g as y,B as C,b as s,A as q,i as P,m as $,r as f,w as g,v as x,f as i,C as z,D as Q,E as I,F as k,G as V,p as R,j as N,H as O,I as j}from"./index.2aa96ee6.js";function G(t){const e=document.getElementById(t);e&&e.showModal()}function H(t){const e=document.getElementById(t);e&&e.close()}function W(t=!0){const{data:e,isLoading:n,isFetching:o,isSuccess:d,refetch:c}=L(["products"],M,{refetchOnWindowFocus:!1,retry:1,onError:a=>console.error(a),enabled:t});return{data:e,isLoading:n,isFetching:o,isSuccess:d,fetchProducts:c}}function J(){const t=T(),{mutate:e,isLoading:n}=A(o=>F(o.id,o.productData,o.config),{onSuccess:()=>{t.invalidateQueries(["products"]),D.success("Product updated successfully")}});return{update:e,isUpdating:n}}const K=["id"],X={class:"modal-content"},Y=h({__name:"ModalComponent",props:{id:null},setup(t){const e=t;function n(){const o=document.getElementById(e.id);o==null||o.close()}return(o,d)=>{const c=P("vue-feather");return l(),m("dialog",{class:"modal-container",id:e.id},[r(C,{onClick:n,theme:"secondary",class:"close-icon"},{default:y(()=>[r(c,{type:"x",size:"20px"})]),_:1}),s("div",X,[q(o.$slots,"default",{},void 0,!0)])],8,K)}}});const Z=$(Y,[["__scopeId","data-v-7d41ca9e"]]),ee={class:"form-container edit-product"},te=s("h2",null,"Edit Product",-1),oe={class:"form edit-product-form"},se=h({__name:"EditProductForm",props:{product:null},setup(t){const e=t,n=f(e.product.name),o=f(e.product.price),d=f(e.product.videoURL),{update:c,isUpdating:a}=J();function v(){const u=new FormData;u.append("name",n.value),u.append("price",o.value.toString()),u.append("videoURL",d.value),c({id:e.product.id,productData:u}),H(`edit-product-${e.product.id}`)}return(u,p)=>(l(),m("div",ee,[te,s("form",oe,[g(s("input",{type:"text","onUpdate:modelValue":p[0]||(p[0]=_=>n.value=_)},null,512),[[x,n.value]]),g(s("input",{type:"text","onUpdate:modelValue":p[1]||(p[1]=_=>o.value=_)},null,512),[[x,o.value]]),g(s("input",{type:"text","onUpdate:modelValue":p[2]||(p[2]=_=>d.value=_)},null,512),[[x,d.value]]),r(C,{text:i(a)?"Updating...":"Update",disabled:i(a),onClick:v},null,8,["text","disabled"])])]))}}),ne=t=>(R("data-v-571e14a5"),t=t(),N(),t),de={class:"product"},ce={class:"product-img"},ae=["src","alt"],re={class:"product-info"},ue={class:"select-container"},le={class:"btn-body add-cart-btn"},ie={class:"btn-body edit-btn"},pe=ne(()=>s("span",null,"Edit",-1)),_e=h({__name:"ProductItem",props:{product:null},setup(t){const e=t,n="https://apple-shop-backend.herokuapp.com",o=z(),d=`edit-product-${e.product.id}`,c=f(1),a=Array.from(Array(10).keys()).map(U=>U+1),{add:v,isAddingToCart:u}=Q(_);function p(){window.scrollTo({top:0,behavior:"smooth"})}function _(){c.value=1,p()}function S(){v({productId:e.product.id,quantity:c.value})}return(U,b)=>{const B=P("v-select"),w=P("vue-feather");return l(),m("div",de,[r(Z,{id:d},{default:y(()=>[r(se,{product:t.product},null,8,["product"])]),_:1}),s("div",ce,[s("img",{src:`${i(n)}/${e.product.productImage}`,alt:e.product.name},null,8,ae)]),s("div",re,[s("h3",null,I(e.product.name),1),s("p",null,I(`$${e.product.price}.00`),1),s("div",ue,[r(B,{modelValue:c.value,"onUpdate:modelValue":b[0]||(b[0]=E=>c.value=E),options:i(a),placeholder:"Qnty",clearable:!1},null,8,["modelValue","options"])]),r(C,{theme:"primary",onClick:S},{default:y(()=>[s("div",le,[s("span",null,I(i(u)?"Adding...":"Add to Cart"),1),r(w,{type:i(u)?"loader":"shopping-cart",size:"20px"},null,8,["type"])])]),_:1}),i(o).user.role==="administrator"?(l(),k(C,{key:0,style:{"margin-top":"1rem"},theme:"primary",onClick:()=>i(G)(d)},{default:y(()=>[s("div",ie,[pe,r(w,{type:"edit",size:"20px"})])]),_:1},8,["onClick"])):V("",!0)])])}}});const me=$(_e,[["__scopeId","data-v-571e14a5"]]),ve={key:0,class:"products"},fe=h({__name:"ProductsContainer",props:{products:null},setup(t){const e=t;return(n,o)=>t.products?(l(),m("div",ve,[(l(!0),m(O,null,j(e.products,d=>(l(),k(me,{key:d.id,product:d},null,8,["product"]))),128))])):V("",!0)}});const he=$(fe,[["__scopeId","data-v-47f213e4"]]),ye={class:"home-container"},ge={class:"search"},xe={key:0},Ce=h({__name:"ProductsView",setup(t){const e=f(""),{data:n,isLoading:o}=W();function d(){var c;return(c=n.value)==null?void 0:c.filter(a=>a.name.toLowerCase().includes(e.value.toLowerCase()))}return(c,a)=>{const v=P("vue-feather");return l(),m("div",ye,[s("div",ge,[g(s("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=u=>e.value=u),placeholder:"Search"},null,512),[[x,e.value]]),r(v,{type:"search",size:"20px"})]),i(o)?(l(),m("h3",xe,[r(v,{type:"loader"})])):(l(),k(he,{key:1,products:d()},null,8,["products"]))])}}});const $e=$(Ce,[["__scopeId","data-v-0d3f9b88"]]);export{$e as default};
